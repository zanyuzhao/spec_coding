# Claude Progress - 工具链与自动化建设

## 项目信息
- 项目名: spec_coding_toolchain
- 模式: Harnesses
- 初始化时间: 2026-02-28

## Feature 总览
- F001: SQLite MCP 配置 ✅ [completed]
- F002: Playwright MCP 配置 ✅ [completed]
- F003: curl_test Skill ✅ [completed]
- F004: git_operations Skill ✅ [completed]
- F005: init.sh 启动脚本 ✅ [completed]
- F006: Harnesses 流程验证 ✅ [completed]
- F007: 文档更新 [pending]

## 进度历史

### 2026-02-28 - F006 完成
- 创建 verify_harnesses.sh 验证脚本
- 验证 feature_list.json 结构和 JSON 语法
- 验证 claude-progress.txt 可读写
- 验证 init.sh 可执行、语法正确、功能正常
- 验证 MCP 配置（3个服务器：memory, sqlite, playwright）
- 验证 Skills（curl_test, git_operations）
- 验证后端服务可启动且健康检查通过
- 所有 20 项验证全部通过

### 2026-02-28 - F005 完成
- init.sh 已存在（初始化时创建），优化后端启动逻辑
- 更新使用 /health 端点替代 /docs 进行健康检查
- 支持 uv 工具管理后端依赖（自动回退到 venv）
- 验证后端可正常启动（curl http://127.0.0.1:8000/health 返回 {"status":"ok"}）
- 支持 --backend-only、--frontend-only、--check 参数

### 2026-02-28 - F004 完成
- 创建 .claude/skills/git_operations/SKILL.md
- 定义分支命名规范（feature/fix/refactor/docs/chore）
- 定义 commit 消息格式（type(scope): subject）
- 明确禁止自动 push，只能由人类执行
- 定义标准工作流（新需求、修复 Bug）
- 定义撤销操作和常用命令速查
- Skill 已被 Claude Code 识别

### 2026-02-28 - F003 完成
- 创建 .claude/skills/curl_test/SKILL.md
- 定义 GET/POST/PUT/DELETE 请求模板
- 定义认证头配置（Bearer Token、Basic Auth、API Key）
- 定义响应断言模式（状态码、响应体检查）
- 定义完整测试函数模板
- Skill 已被 Claude Code 识别

### 2026-02-28 - F002 完成
- 配置 Playwright MCP（@playwright/mcp@latest，Microsoft 官方）
- 验证 Playwright MCP 可运行（npx -y @playwright/mcp@latest --help）
- 更新 mcp_setup.md 添加 Playwright 使用说明
- 可用工具：browser_navigate, browser_click, browser_type, browser_screenshot 等

### 2026-02-28 - F001 完成
- 安装 uv/uvx 工具
- 配置 SQLite MCP 服务器（官方 PyPI 包 mcp-server-sqlite）
- 创建 data/init_db.sql 初始化脚本
- 创建 docs/harnesses/mcp_setup.md 配置文档
- 更新 .gitignore 忽略数据库文件
- 创建 .env.example 环境变量模板
- 注意：Postgres MCP 官方包尚未发布到 PyPI，已记录可选配置方式

### 2026-02-28 - 初始化
- 创建 docs/harnesses/ 目录
- 创建 scope.md（高层目标与范围）
- 创建 feature_list.json（7 个 feature）
- 创建 init.sh（启动脚本）
- 创建 claude-progress.txt（本文件）
- 状态: 初始化完成，等待开始第一轮

## 使用说明
1. 每轮说「继续」或「下一轮」，AI 将执行 harnesses_coding_session
2. 每轮完成一个 feature，通过 E2E 验收后标记 passes: true
3. 所有 feature 完成后，进行最终验收

## init.sh 用法
```bash
# 启动全部服务
./docs/harnesses/init.sh

# 仅启动后端
./docs/harnesses/init.sh --backend-only

# 仅启动前端
./docs/harnesses/init.sh --frontend-only

# 检查服务状态
./docs/harnesses/init.sh --check
```

## MCP 配置验证
重启 Cursor 后，在对话中询问：
- "列出 SQLite 数据库中的所有表"

## 已知问题
- Postgres MCP 官方包尚未发布到 PyPI，需从源码或 Docker 使用
