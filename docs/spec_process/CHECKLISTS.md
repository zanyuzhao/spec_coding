# Spec 流程检查清单

本文档提供**开发清单**与**归档检查列表**，用于在开发与归档时按项核对，防止逻辑缺失和执行遗漏。执行 spec 流程的 AI 与人在实现、归档阶段应逐项使用对应清单。

---

## 一、开发清单列表（实现阶段）

在实现或修改代码时，按本清单逐项核对，避免遗漏接口、场景或约定。可在该需求的 spec 同目录下使用 `tasks.md` 列出并勾选，或在本清单基础上按需求裁剪。

### 1.1 需求与接口覆盖

- [ ] spec 中列出的**每个接口/端点**在 backend 或 frontend 中均有对应实现（路由、handler、调用链）。
- [ ] 每个接口的**请求/响应约定**（字段名、类型、必填/可选、状态码）与代码实现一致；若有 Pydantic/OpenAPI，与 spec 描述一致。
- [ ] spec 中写明的**业务场景或用户故事**在实现中有对应逻辑（如「仅返回 proposal/implementation」→ 代码中有过滤）。

### 1.2 边界与错误处理

- [ ] **边界条件**已考虑：空列表、空参数、分页越界、不存在 ID 等，行为与 spec 或约定一致。
- [ ] **错误与异常**：非法入参、未授权、依赖失败等有明确处理（返回码、错误信息格式），不泄露内部信息。
- [ ] 若 spec 涉及**权限/多租户**：已按约定做隔离或校验。

### 1.3 一致性与冲突

- [ ] 与**现有接口、数据模型、配置**无未决冲突；若为 MODIFIED，旧调用方或兼容策略已考虑。
- [ ] **前后端/多端**：若 spec 同时涉及 backend 与 frontend，两端约定一致且已同步实现或标注待实现。

### 1.4 可验证与文档

- [ ] 具备**可验证方式**：可手动调接口、跑测试或看 UI，能确认行为符合 spec。
- [ ] **文档/注释**与行为一致：关键接口有 docstring 或说明（如请求/响应示例），README 或 `docs/` 若有更新则与实现一致。

### 1.5 实现完成判定

- [ ] 以上各项通过后，可认定**实现完成**：spec 中列出的接口/场景/约定在代码中均有对应且行为一致。

---

## 二、归档检查列表（归档阶段）

用户明确说「归档」或「开发完成」等时，按本列表**逐项执行**，不得仅凭文字描述跳过步骤；执行完毕可在回复中简要说明已完成的项。

### 2.1 归档前准备

- [ ] **归档对象已明确**：当前要归档的是 `docs/spec/active/` 下的哪一项（文件名或目录名）；若多个，已与用户确认或按约定选当前对话涉及项。
- [ ] **归档前校验已执行且通过**：已列出该 spec 的接口/场景/约定，逐项检查 backend/frontend 有对应实现且行为一致；若有不一致，已先改 spec 或代码再继续归档。

### 2.2 Delta 与合并

- [ ] **Delta 已识别**：该 spec 中 ADDED/MODIFIED/REMOVED 已标出或可推断；目标领域（对应 `specs/<领域>/spec.md`）已确定。
- [ ] **合并目标存在**：`specs/<领域>/spec.md` 已存在或已新建；若新建，目录与命名符合约定。
- [ ] **合并已执行**：按 ADDED 追加、MODIFIED 替换、REMOVED 删除，已写入对应 `specs/<领域>/spec.md`；未误删其他无关内容，未漏合本变更的段落。
- [ ] **多变更同领域**：若本次归档与近期其他归档均涉及同一 `specs/<领域>/spec.md`，合并顺序明确、无互相覆盖或冲突。

### 2.3 移入 archive 与清理

- [ ] **已移入 archive**：该变更已从 `docs/spec/active/` 移入 `docs/spec/archive/`；路径建议带日期与下划线名称（如 `archive/2025-02-07_spec_list_api/`）便于追溯。
- [ ] **active 无残留**：active 下该变更对应的文件或目录已全部移走，无遗漏文件或空目录。
- [ ] **归档清理已完成**：该变更**专属**的临时文档（仅服务于本变更的 design-note、临时说明、草稿等）已移入其 archive 目录或删除，未留在 `docs/spec/active/` 或 `docs/spec/` 根目录；常青流程文档（如 `docs/spec_process/` 下）未删除。

### 2.4 文档与回复

- [ ] **接口/使用文档**（若做）：已按约定补充接口说明（如 FastAPI docstring、请求/响应说明）或使用说明（README 小节、示例），位置与现有约定一致。
- [ ] **执行回复**：已向用户简要说明：已归档 [需求名]，已合并到 specs/[领域]，接口/使用文档已补充（若做了）。

---

## 三、使用约定

- **开发阶段**：实现或修改代码后，按「开发清单列表」逐项核对；复杂需求可在 `docs/spec/active/<需求名>/tasks.md` 中列出与 spec 对应的子项并勾选（需求名与 spec 文件名使用下划线，见领域命名规范）。
- **归档阶段**：仅在用户**明确**说「归档」「开发完成」「当前需求归档」等时执行归档；执行时必须按「归档检查列表」逐项完成，不得跳过。
- **规则引用**：`spec_manager.mdc` 中已约定开发时参考本开发清单、归档时按本归档检查列表执行；本文件为常青文档，存放在 `docs/spec_process/`，不随单次需求归档而删除。
