# 需求说明与设计文档模板

新需求触发时，在 `docs/spec/active/` 下产出**需求说明**与**设计文档**后即停止，待用户确认或修改文档后再继续开发。推荐写在同一份 spec 中，用下列结构（可按需求裁剪）。

## 文件头

```markdown
status: proposal
```

文档阶段用 `proposal`；用户确认并说「继续开发」后，可改为 `implementation`。

---

## 一、需求说明

- **需求简述**：一两句话说明做什么、为谁、解决什么问题。
- **背景/目标**（可选）：为什么做、业务或技术背景。
- **用户故事或场景**（可选）：例如「作为 xxx，我希望…，以便…」或关键使用场景。
- **验收标准**（文字）：完成的定义，如「接口返回分页数据」「前端列表支持排序」。可执行验收命令放在「设计」的「验收」段。

---

## 二、设计

- **接口与数据模型**：API 路径、方法、请求/响应字段；涉及的表或模型变更。
- **前后端方案**（可选）：后端改动点、前端页面/组件、调用关系。
- **任务拆分**（可选）：编号列表，如「1. 后端：新增 GET /api/xxx 2. 前端：列表页 3. 验收：…」。便于实现时逐项执行。
- **验收**：必写。列出可执行命令，实现完成后用于自测；失败则改代码再跑直到通过。  
  示例：
  - 后端：`cd backend && pytest tests/test_xxx.py -v`
  - 前端：`cd frontend && npm run build`

---

## 示例（精简）

```markdown
status: proposal

# 需求说明
- **需求简述**：订单列表支持分页与按状态筛选。
- **验收标准**：接口支持 page/size/status 参数并返回分页结构；前端展示分页控件与筛选。

# 设计
- **接口**：GET /api/orders?page=1&size=20&status=paid，响应 `{ items, total, page, size }`。
- **任务拆分**：1. 后端：分页与筛选 2. 前端：列表与分页 UI 3. 验收：见下。
- **验收**
  - 后端：`cd backend && pytest tests/test_orders.py -v`
  - 前端：`cd frontend && npm run build`
```

用户确认文档后说「继续开发」，再按此 spec 与设计进行实现。
